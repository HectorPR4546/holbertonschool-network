#!/usr/bin/env bash
# Update /etc/hosts: localhost -> 127.0.0.2, facebook.com -> 8.8.8.8

hosts="/etc/hosts"
backup="${hosts}.bak"
tmp="$(mktemp)"

cp "$hosts" "$backup"
grep -vE '(^|[[:space:]])(localhost|facebook\.com)($|[[:space:]])' "$hosts" > "$tmp" || true
{
  printf "127.0.0.2 localhost\n"
  printf "8.8.8.8 facebook.com\n"
  cat "$tmp"
} > "$hosts"
rm -f "$tmp"

